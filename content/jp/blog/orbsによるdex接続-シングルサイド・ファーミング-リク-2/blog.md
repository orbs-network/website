---
layout: partials/shared/mappers/blog-mapper
image: /assets/img/blog/orbsによるdex接続-シングルサイド・ファーミング-リク-2/bg.jpeg
blogUrl: orbsによるdex接続-シングルサイド・ファーミング-リク-2
date: 2021-04-18
title: OrbsによるDEX接続 シングルサイド・ファーミング リクイディティ Nexus — パート 2
author:
  - /jp/blog/common/authors/TalKol.md
type:
short_description: Orbs Liquidity Nexusは、CeFiから来る流動性をDeFiに導入します。
---

_[Orbs Liquidity Nexus](https://www.orbs.com/jp/orbs-%e3%83%aa%e3%82%af%e3%82%a4%e3%83%87%e3%82%a3%e3%83%86%e3%82%a3nexus%e3%81%ae%e7%b4%b9%e4%bb%8b-%e6%b5%81%e5%8b%95%e6%80%a7%e4%be%9b%e7%b5%a6%e3%82%b5%e3%83%bc%e3%83%93%e3%82%b9/)は、CeFi から来る流動性を DeFi に導入します。_

_最近では、SushiSwap や PancakeSwap などの、DEX での取引が増え、ETH/USDC や BNB/BUSD といった人気のあるプールが選ばれています。_

_CeFi 資本は、価格の安定した USDC や BUSD を提供します。DeFi 資本は、ETH や BNB といった暗号通貨を提供します。ここからは、それらを合わせたファーミングの世界をお見せします。_

_[Nexus パート１はこちらよりご覧ください](https://www.orbs.com/jp/orbs%E3%81%AB%E3%82%88%E3%82%8Bdex%E6%8E%A5%E7%B6%9A-%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%82%B5%E3%82%A4%E3%83%89%E3%83%BB%E3%83%95%E3%82%A1%E3%83%BC%E3%83%9F%E3%83%B3%E3%82%B0-%E3%83%AA%E3%82%AF/)_

...

## リクイディティ・ファーミングのリスクとリワード

人気のある DEX のほとんどは、[Uniswap](https://info.uniswap.org/pairs)のコンセプトを発展させたもので、リスク/リワードモデルもよく似ています。[SushiSwap](https://app.sushi.com/farms/permanent)、[1inch](https://1inch.exchange/#/dao/pools?network=1)、[PancakeSwap](https://pancakeswap.finance/farms)などがそれに当たります。ここでは Uniswap のモデルを掘り下げることで、それら DEX のリワード・システムがどのように機能するのかを見てみましょう。

ETH/USDC プールで流動性を提供していると仮定します。

リクイディティ・プロバイダの代表格である Uniswap のインセンティブ・モデルは主に 3 つです。

１.**リワード**：スワップ手数料。トレーダーがプール上でスワップを行う（この例では ETH を USDC に、USDC を ETH にスワップする）たびに、流動性プロバイダには 0.3％のスワップ手数料が付与されます。この手数料は比例配分され、各プロバイダが保有する LP トークンの価値を高めます。

**２.リスク：**[インパーマネント・ロス（IL）](https://academy.binance.com/ja/articles/impermanent-loss-explained)。日本語では「変動損失」や「未確定損失」などと訳されます。スワップが発生すると、ペアの価格が変化します。アービトラージトレーダーは通常、外部マーケット価格を反映する動きをし、プールがそれを反映するまでスワップを続けることで利益を得ます。価格が流動性プロバイダが設定した値から離れると損失が生じます。これはプロバイダが取引を確定させないと実績化しないため、「変動」や「未確定」などと呼ばれます。したがって、価格がスタート時点の値に戻ると、この損失は確定せず消失します。

**3.リワード** ー ファーミング・リワード。流動性プロバイダに更なる参加インセンティブを与えるために、ガバナンス・トークン（UNI、SUSHI、1INCH、CAKE など）を配布することがよくあります。このリワードは比例配分され、時間に応じて、通常はブロックごとに少額が分配されます。すべてのペアに一律に配布されるものではなく、各プロジェクトのガバナンスが決めたインセンティブ・プログラムにより大きく異なります。

## 流動性プロバイダは常に利益を得られるか？

いいえ。大きく分けて二つのリワードと、ひとつのリスクがあるので、そのバランス次第となります。そこに外部市場価格、流動性プロバイダがプールに入金した期間、プール内のスワップ量、総流動性など、複数の要因が絡んできます。以下簡単に説明します。

- 取引量 : スワップ量（プールを介してスワップする人）が多いほど、スワップ手数料が多くなり、LP（流動性提供者）にとって都合が良い。
- 価格変動 : 価格変動が大きければ大きいほど（ETH/USDC の場合、ETH 価格が上がっても下がっても）、IL が多くなり、LP にとっては不利になる。
- リワード・ガバナンストークンの価格 : SUSHI が上がれば、ファーミング・リワードの価値が上がり、LP にとって都合が良い。
- 総流動性 : TVL(Total Value Locked、DeFi の預かり資産)が多ければ多いほど、リワードはより多くのファーマーに分配され、一人当たりの利益は少なくなり、LP にとっては不利になる。

一般的に、ETH/USDC のような人気のあるファーミング・ペアは、通常、LP、リクイディティ・プロバイダにとって利益をもたらします。なぜなら、人気がなければそのペアに流動性もないからです。

## インパーマネント・ロス（IL）とは

ここまで、IL はペアの 2 つのトークン間の価格変動に起因することを説明しました。ETH/USDC の例では、ETH 価格が USDC に比べて上がったり下がったりしたときに起こります。

では、次はリクイディティ・プロバイダは IL をどのように受けるのかを見ていきます。

例えば、1 日目に ETH 価格が 2000 ドルで、LP が 100ETH と 200,000US ドルを追加したとします（流動性の追加にはバランスをとる必要があります）。30 日目に LP が流動性を引き出す時に、ETH の価格が高くなり、2500 ドルになったとします。LP が引き上げる際には、元の 100ETH と 200,000US ドルが戻ってくるのではなく、代わりに 89.44ETH と 223,606.80US ドルを受け取ることになります。

これは良いことなでしょうか、それとも悪いことなのでしょうか？ETH の価格が動いたことにより、IL が起きたのだから、悪いことなのでしょうか。具体的にどのように悪いのか見ていきましょう。

引き上げ時の USD 価格の合計（ETH が 2500 ドルの時の 89.44ETH と 223,606.80 USDC）は 447,213.60 ドルです。もし LP がプールに参加せず、もともと持っていた 100ETH と 200,000 USDC をそのまま保有していたら、LP の保有資産の USD 総額は 450,000.00 ドル（ETH が 2500 ドルの時の 100ETH と 200,000 USDC）になっていたでしょう。つまり、LP は 2,786 ドル（約 0.62％）を失ったことになります。

これは悪い数字でしょうか？いいえ、スワップ手数料やリワードが、この 0.62%の損失よりもはるかに大きな利益をもたらすのであれば、そんなに悪い結果ではないでしょう。

次の表は、ETH の価格がそれぞれの価格帯（+25%、-25%、+50%、-50%、+75%、-75%）で動くときの、IL の変化をまとめたものです。

![](/assets/img/blog/orbsによるdex接続-シングルサイド・ファーミング-リク-2/1_8fucWsEI_LFkMZIZn31iLw-1030x242.png)

## IL を 2 者間で分割する

このブログで検討しているコンセプトは、ETH/USDC ファーミングのための流動性を、2 つの異なる資本提供者（ETH を提供する資本家と USDC を提供する資本家）から調達するというものです。

議論のために、スワップ手数料やファーミングのリワードはここでは計算せず、ETH の価格変動のみに注目し、IL のことを考えます。IL を 2 者間に分けるのにはどうすればいいでしょうか？

### 戦略 1 — すべての IL を ETH 提供者が引き受ける

[前回のパート１](https://www.orbs.com/jp/orbs%e3%81%ab%e3%82%88%e3%82%8bdex%e6%8e%a5%e7%b6%9a-%e3%82%b7%e3%83%b3%e3%82%b0%e3%83%ab%e3%82%b5%e3%82%a4%e3%83%89%e3%83%bb%e3%83%95%e3%82%a1%e3%83%bc%e3%83%9f%e3%83%b3%e3%82%b0-%e3%83%aa%e3%82%af/)では、2 つの全く異なるタイプの資本提供者が、異なる結果を求めていることを見てきましたので、リスクは必ずしも均等に分ける必要はありません。リクイディティ Nexus の面白さは、実際には物事が非対称であるときに生まれます。

ここでは完全に非対称にして、ETH 提供者側がすべての IL を引き受けることにしてみましょう。ETH を提供する DeFi プレイヤーは、暗号資産のボラティリティ・リスクをより多く引き受ける代わりに、より高いリワード（高い APY）を提供することができるため、これは理にかなっています。USDC を提供する CeFi プレイヤーは、暗号資産のボラティリティが限られているため、低いリワード（低い APY）で妥協することになります。

実際にはどうなのでしょうか？先ほどの数値例に戻ってみましょう。1 日目、ETH の価格は 2000 ドル。サイド A は 100ETH、サイド B は 20 万 USDC を供給したとしましょう。30 日目、資本提供者が流動性を引き出したいときに、ETH の価格が高くなり、2500 ドルになったとします。当初の 100ETH と 200,000USDC の代わりとして LP トークンがバーンされると、89.44ETH と 223,606.80USDC を持つことになります。

サイド B が IL を引き受けていない場合、ETH の価格が 2500 ドルになったことは、全く影響しないはずです。この例では IL のみで報酬や手数料を考慮していないため、サイド B は最初に預けた 200,000 USDC を引き出せます。引き上げ時に手元に戻るのは 223,606.80USD なので、200,000 を返した後は、23,606.80USD が残ります。当然ですが、ここからサイド A にできるだけ多くの補償をすることになります。

先ほどの表と比較してみましょう。

![](/assets/img/blog/orbsによるdex接続-シングルサイド・ファーミング-リク-2/1_3KFuTfgeVYL5l1FBxp-bA-1030x164.png)

サイド A（ETH 側）の IL が約 2 倍になっているのがわかりますが、これは片側だけがすべてを受け持っているからで、理にかなっています。この戦略を別の角度から見ると、サイド B は実際にはファーミングをしていないことになります。その代わりに、サイド B はサイド A に USDC を融資しています。しかし、この融資は「Compound」や「Aave」で得られるものよりもはるかに効率的です。この効率性は、担保をそのまま寝かせておいたのではなく、積極的にファーミングを行い、高い利回りを生み出していることに起因します。コントラクトがこの動作を実行するので，サイド B はいつでも USDC を取り戻すことができ，その際に LP ポジションを自動的に解消することができます。言い換えれば、担保がファーミング中であっても、それほどリスクは高くなっていません。

もう一つ極端な例をあげると、ETH の価値が 75%下落した場合です。少し極端過ぎるかもしれませんが、、通常のエコノミクスを学ぶために例をあげました。このケースでは、ETH を提供したサイド A がすべての資本を失うことがわかります。

ここまではご理解いただけましたでしょうか。どちらが正しいとか、悪いということではありません。次のような根拠を見てみます。

- これを融資としてみた場合、清算が行われる境界線を定め、リスクを負う側が、その前にポジションを解消するのが普通です。サイド A が ETH の価格が下がり始めたことに気づけば、大きな損失を被る前に撤退することでしょう。
- この例では、スワップ手数料とリワードを無視しています。IL に対抗するには、スワップ手数料だけで十分な利益がでるケースが大半です。もしそうでなければ、すべての LP が損失を出し、誰も流動性を提供しなくなってしまうでしょう。この例に、手数料と報酬の加算をすると、サイド A は資本のすべてを失ってしまうことになります。
- この損失は未確定であり、流動性が引き出された場合にのみ確定となります。ETH が短期間で 75％下落しても、これまでは、長期的にみれば価格は戻しています。サイド A は、将来の相場回復に期待してポジションを維持すれば良いことになります。

とはいえ、この方法が気に入らない人もいるでしょうから、アルゴリズムを少し調整してこの解決策を回避し、別の方法で IL を分割してみましょう。

### 戦略 2 — ETH が上昇した場合における ETH 上の IL

もう一つおもしろい選択肢があります。戦略 1 の表を見ると、ETH が上昇したときに、モデルケースではうまく動作していることがわかります。危険な状態になるのは ETH が下がり始めた時で、特に 75%以上の極端な値の時です。

この場合、USDC 側が IL の一部を共有していたらどうでしょうか。そうすれば、暗号資産のボラティリティに対する完全な防御とはならなくても、ETH 側を深刻な損失から守ることができるでしょう。

これはどのようなことなのか、これから説明をします。ETH 価格が上昇した場合は、我々は戦略 1 の動きをします。では、先ほどの例で ETH が下落した場合を数字で検証してみましょう。30 日目となる今回は、両サイドが流動性を引き出したいときに ETH の価格が下がり、1500 ドルになっています。LP トークンがバーンされると、当初の 100ETH と 200,000US ドルではなく、115.47ETH と 173,205.08US ドルを持つことになります。

この場合サイド A を最大限保護し、元本の 100ETH を維持することができるとします。そうすると、15.47ETH が余分として残り、これをサイド B のわずかな損失の補填に充てることができます。この 15.47ETH を ETH のままにしておくのか、それとも USDC に交換するのかは興味深い問題ですね。サイド B としては USDC での活動を希望しているので、スワップを希望するでしょう。しかし一方では、ETH が値下がりしたばかりであれば、売るにはタイミングが悪いかもしれません。この質問は今のところ保留にしておきましょう。

では次の表を、先ほどの表と比較してみましょう。

![](/assets/img/blog/orbsによるdex接続-シングルサイド・ファーミング-リク-2/1_Blcfyf3fnoXXrnsFZVpvpw-1030x214.png)

私がこの戦略を気に入っている理由の一つは、ここに素晴らしい裏話があるからです。IL のリスクはどうにかして共有しなければなりませんが、それを回避することはできません。ETH 価格が上昇すれば、ETH を供給する側は大金を手にすることになり、IL を自身で負担しても満足する利益が得られるでしょう。ETH が下落した場合は、ETH を供給する側はすでに赤字になっているので、痛みを分かち合う時となります。USDC を供給する側にとっては、このような状況になった場合、実は ETH を低価格で購入していることになり、下落時の購入では大きな上昇の可能性が潜んでいることになります。

### 戦略 3 — IL を均等に分ける

念のため、IL を双方で均等に分けた場合の数字も紹介しておきましょう。この計算は非常に簡単で、きれいに双方同じ額となります。

先ほどの例に戻りましょう。30 日目に、双方が流動性を引き出そうとしたとき、ETH 価格は上昇し、2500 ドルになっているとします。LP トークンがバーンされると、当初の 100ETH と 200,000US ドルではなく、89.44ETH と 223,606.80US ドルを持つことになります。サイド A は原資 100ETH に対してわずかに損失がでて、サイド B は原資 200,000US ドルに対してわずかに利益を得ています。ここで両者の原資に対して、損失がまったく同じになるような、真ん中の数字を見つけることはできるでしょうか？

その数字は、正確には 24,845.2 USDC であり、これを ETH にスワップします。これにより、99.38ETH と 198,761.60USDC が得られるとします。これは、双方がわずかな損失を共有することを意味します。ではわずかとはどの程度の損失でしょうか？最初に投資した原資に対してちょうど 0.62%です。この 0.62%という数字には見覚えがありますよね。なんと先ほど標準的な両建てをしたときにお伝えした IL と全く同じなのです。

では次の表を、上の先ほどの表と比較してみましょう。

![](/assets/img/blog/orbsによるdex接続-シングルサイド・ファーミング-リク-2/1_Zka4CQ79BqRR9Tmw7UFQxw-1030x164.png)

こちらの戦略ではきれいに同じ数字が並び、とても整って見えますが、個人的にあまり好きではありません。シングルサイド・ファーミングを行う場合、両者は決して平等にはなりません。双方に同じ数字を強要するのは、必ずしも良いことではありません。

## まとめ

このブログの目的は、シングルサイド・ファーミングを一緒に行う 2 者間で、IL を共有するためのさまざまな戦略をどのように実行していくかということです。お伝えした戦略は、それぞれ魅力的であり、メリットとデメリットがあります。

しかし、戦略はお伝えした３つだけとは限りません。例えば、戦略 1 より 50％、戦略 3 より 50％を組み合わせて面白い組み合わせを作ることもできるのです。IL は完全に平等ではなく、USDC 側を守るほうに有利に働きます。

これまで戦略を議論する際に、リワードについては言及してきませんでした。一緒にファーミングをすることで APY40％の SUSHI リワードトークンが得られるとしたら、そのリワードを 2 者間でどのように分割するかという問題が残っています。IL が均等に分配されなければ、リワードも均等に分配されないと考えるのが自然でしょう。当然のことながら、リスクを背負っている方がより多くのリワードを得ることができます。

## 詳細について

私たちの取り組みに興味をお持ちいただき、公開前の開発中の段階をご覧になりたい場合は、Github で Orbs をフォローしてください。

https//github.com/orbs-network —Github の Orbs プロジェクト

https://github.com/defi-org-code — DeFi.org Accelerator イノベーションラボ（アイデアは初めにここから生まれます）

...

備考:

このブログでは、Orbs チームとエコシステムのコントリビュータが、現在研究しているプロジェクトの詳細を説明しています。このプロジェクトは現在、コンセプトモードであり、Orbs チームが現在想定しているものを紹介しています。

Orbs は、コミュニティの貢献とガイダンスによって推進される分散型のプロジェクトです。したがって、本ブログに記載されている製品や機能は、コミュニティからのフィードバックに基づいて作成された提案にすぎず、新しい要件の発生により継続的に変更される可能性があります。本ブログは、いかなるサービス、製品、または特定の機能が完全または部分的に開発されることを保証するものではありません。

本ブログに記載された情報は、いかなる管轄区域においても何かを確約するものではなく、そして根拠またそれに依拠するものでもありません。

...

![](/assets/img/blog/orbsによるdex接続-シングルサイド・ファーミング-リク-2/Screen-Shot-2021-03-29-at-15.07.57.png)

##### Tal Kol 　 Orbs 共同創設者　技術チームリーダー

モバイルアプリのスタートアップ Appixia を共同設立、のちに Wix.com に売却し、同社モバイルエンジニアリング責任となる。ブロックチェーン・コンシューマ・アプリケーションの専門家。Kik Interactive 元エンジニアリング責任者。 オープンソース愛好家。React エコシステムに貢献し、カンファレンスではスピーカーとして活躍。テクニオン大学でコンピュータ・エンジニアリングの理学士号を取得、IDF8200 ユニットのエリートセクションを退役。

...

最後までお読みいただきありがとうございます。

ご質問はいつでも[Orbs Japan Telegram](https://t.me/joinchat/G0HZhBQssmZ05v6sp_G6jg)、[オフィシャル LINE](https://line.me/R/ti/p/%40vrf9558a)へご連絡ください。[Orbs Japan twitter](https://twitter.com/JapanOrbs)、日本語[youtube チャンネル](https://www.youtube.com/channel/UCZePjhX4e6CuAe8v63Li9lg) へのご登録もお待ちしています。
